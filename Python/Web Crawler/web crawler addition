#先查看要爬取液面之程式代碼

#導出csv套件
import csv
from datetime import datetime

import urllib2
from bs4 import BeautifulSoup

quote_page = ‘http://www.bloomberg.com/quote/SPX:IND’

# 檢索網站並獲取 html 代碼，存入變量”page”中
page = urllib2.urlopen(quote_page)

# 用 beautifulSoup 解析 HTML 代碼並存入變量“soup”中`
soup = BeautifulSoup(page, ‘html.parser’)

# 獲取“名稱”類的<div> 代碼段落並提取相應值
name_box = soup.find(‘h1’, attrs={‘class’: ‘name’})

# strip() 函數用於去除前後空格
name = name_box.text.strip()
print name

#獲取信息
price_box = soup.find(‘div’, attrs={‘class’:’price’})
price = price_box.text
print price

# 以「添加」模式打開一個 csv 文件，以保證文件原有信息不被覆蓋
with open(‘index.csv’, ‘a’) as csv_file:
writer = csv.writer(csv_file)
writer.writerow([name, price, datetime.now()])
